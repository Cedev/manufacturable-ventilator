Version 4
SHEET 1 3040 3620
WIRE 848 -544 848 -560
WIRE 848 -464 848 -544
WIRE 1232 -464 1232 -544
WIRE 208 -352 208 -384
WIRE 848 -352 848 -384
WIRE 1232 -336 1232 -384
WIRE 208 -240 208 -272
WIRE 848 -208 848 -272
WIRE 848 -208 816 -208
WIRE 864 -208 848 -208
WIRE 992 -208 944 -208
WIRE 1072 -208 1072 -240
WIRE 1072 -208 992 -208
WIRE 1152 -208 1072 -208
WIRE 1232 -208 1232 -256
WIRE 1232 -208 1152 -208
WIRE 1328 -208 1232 -208
WIRE 992 -192 992 -208
WIRE 1152 -192 1152 -208
WIRE 1328 -192 1328 -208
WIRE 1616 -176 1616 -208
WIRE 1616 -176 1568 -176
WIRE 1664 -176 1616 -176
WIRE 1840 -176 1744 -176
WIRE 2032 -176 1920 -176
WIRE 2032 -112 2032 -176
WIRE 160 -80 64 -80
WIRE 336 -80 240 -80
WIRE 528 -80 416 -80
WIRE 720 -80 528 -80
WIRE 992 -80 992 -112
WIRE 992 -80 800 -80
WIRE 1152 -80 1152 -112
WIRE 1152 -80 992 -80
WIRE 1328 -80 1328 -112
WIRE 1328 -80 1152 -80
WIRE 1392 -80 1488 -176
WIRE 1392 -80 1328 -80
WIRE 1472 -80 1392 -80
WIRE 2032 -80 2032 -112
WIRE 1328 -48 1328 -80
WIRE 992 -32 992 -80
WIRE 1152 -32 1152 -80
WIRE 64 16 64 -80
WIRE 1488 16 1392 -80
WIRE 1616 16 1616 -16
WIRE 1616 16 1568 16
WIRE 1664 16 1616 16
WIRE 1856 16 1744 16
WIRE 2032 16 1936 16
WIRE 1392 32 1392 -80
WIRE 848 64 816 64
WIRE 864 64 848 64
WIRE 992 64 992 48
WIRE 992 64 944 64
WIRE 1072 64 992 64
WIRE 1152 64 1152 48
WIRE 1152 64 1072 64
WIRE 1232 64 1152 64
WIRE 1328 64 1328 32
WIRE 1328 64 1232 64
WIRE 1072 96 1072 64
WIRE 2032 112 2032 16
WIRE 848 128 848 64
WIRE 1232 128 1232 64
WIRE 2032 128 2032 112
WIRE 1392 144 1392 96
WIRE 64 176 64 96
WIRE 336 224 336 192
WIRE 2272 224 2272 192
WIRE 848 240 848 208
WIRE 1232 240 1232 208
WIRE 416 304 336 304
WIRE 592 304 512 304
WIRE 1232 320 1232 304
WIRE 1888 320 1888 288
WIRE 2272 336 2272 304
WIRE 416 352 336 352
WIRE 592 352 528 352
WIRE 848 384 848 320
WIRE 848 384 768 384
WIRE 1232 384 1232 320
WIRE 848 400 848 384
WIRE 416 416 416 384
WIRE 1888 432 1888 400
WIRE 336 464 336 432
WIRE 768 480 768 384
WIRE 880 480 768 480
WIRE -80 528 -80 496
WIRE 336 624 336 592
WIRE 672 624 672 592
WIRE 928 624 928 592
WIRE 1200 624 1200 592
WIRE 1552 624 1552 592
WIRE 1824 624 1824 592
WIRE 2064 624 2064 592
WIRE -80 640 -80 608
WIRE 672 704 672 688
WIRE 672 704 336 704
WIRE 928 704 672 704
WIRE 1200 704 928 704
WIRE 1552 704 1200 704
WIRE 1824 704 1552 704
WIRE 2064 704 1824 704
WIRE 2192 704 2064 704
WIRE 336 736 336 704
WIRE 336 752 336 736
WIRE 128 864 128 832
WIRE 336 864 336 832
WIRE 544 864 544 832
WIRE 720 864 720 832
WIRE 1120 864 1120 832
WIRE 1296 864 1296 832
WIRE 336 944 128 944
WIRE 544 944 336 944
WIRE 720 944 544 944
WIRE 128 976 128 944
WIRE 1120 976 1120 944
WIRE 1296 976 1296 944
WIRE 720 1104 720 1072
WIRE 1136 1104 1136 1072
WIRE 128 1120 128 1088
WIRE 320 1120 320 1088
WIRE 128 1232 128 1200
WIRE 320 1232 320 1200
WIRE 720 1232 720 1184
WIRE 1136 1232 1136 1184
WIRE 720 1392 720 1360
WIRE 112 1408 112 1376
WIRE 720 1504 720 1472
WIRE 112 1520 112 1488
WIRE 1200 1600 1200 1568
WIRE -624 1616 -624 1584
WIRE 640 1616 640 1584
WIRE 848 1632 848 1616
WIRE 400 1664 400 1632
WIRE 848 1664 848 1632
WIRE 1200 1712 1200 1680
WIRE -624 1728 -624 1696
WIRE 48 1728 48 1696
WIRE 640 1728 640 1696
WIRE 640 1744 640 1728
WIRE 1520 1760 1520 1728
WIRE 400 1776 400 1744
WIRE 848 1776 848 1744
WIRE 848 1792 848 1776
WIRE 48 1840 48 1808
WIRE -528 1872 -528 1840
WIRE 1520 1872 1520 1840
WIRE 784 1936 784 1904
WIRE -528 1984 -528 1952
WIRE 208 1984 208 1952
WIRE 208 1984 64 1984
WIRE 784 2048 784 2016
WIRE 208 2064 64 2064
WIRE 208 2096 208 2064
WIRE 96 2176 96 2144
WIRE 784 2176 784 2144
WIRE 1232 2176 1232 2144
WIRE 96 2288 96 2256
WIRE 784 2288 784 2256
WIRE 1232 2288 1232 2256
WIRE 96 2416 96 2384
WIRE 96 2528 96 2496
WIRE 672 2592 672 2560
WIRE 96 2608 96 2576
WIRE 672 2688 672 2672
WIRE 96 2720 96 2688
WIRE 768 2816 768 2784
WIRE 112 2832 112 2800
WIRE 768 2928 768 2896
WIRE 112 2944 112 2912
WIRE 112 3056 112 3024
WIRE 112 3168 112 3136
WIRE 1232 3184 1232 3152
WIRE 112 3248 112 3216
WIRE 784 3248 784 3216
WIRE 1232 3296 1232 3264
WIRE 112 3360 112 3328
WIRE 784 3360 784 3328
WIRE 2560 3392 2560 3360
WIRE 2176 3456 2176 3424
WIRE 112 3472 112 3440
WIRE 720 3472 720 3440
WIRE 1616 3472 1616 3440
WIRE 1200 3488 1200 3456
WIRE 2560 3504 2560 3472
WIRE 2176 3568 2176 3536
WIRE 112 3584 112 3552
WIRE 720 3584 720 3552
WIRE 1616 3584 1616 3552
WIRE 1200 3600 1200 3568
FLAG 64 176 0
FLAG 880 480 0
FLAG 528 -80 Supply
FLAG 1472 -80 PB2
FLAG 1232 384 0
FLAG 1232 -544 0
FLAG 2032 -112 0
FLAG 2032 112 0
FLAG 848 -544 0
FLAG 336 736 0
FLAG 336 592 QS
FLAG 1200 592 QV1
FLAG 672 592 QC1
FLAG 928 592 QC2
FLAG 1824 592 QO1
FLAG 1552 592 QV2
FLAG 2064 592 QO2
FLAG 128 832 REC1
FLAG 336 832 REC2
FLAG 544 832 D1_min
FLAG 720 832 D2_min
FLAG 128 976 0
FLAG 816 64 C1
FLAG 816 -208 C2
FLAG 128 1088 FC1
FLAG 320 1088 FC2
FLAG 720 1072 FSY
FLAG 128 1232 0
FLAG 320 1232 0
FLAG 720 1232 0
FLAG 1136 1072 BETA
FLAG 1136 1232 0
FLAG 208 1952 R
FLAG 48 1840 0
FLAG 112 1376 length_past
FLAG 720 1360 area_past
FLAG 400 1632 wedge_length
FLAG 640 1584 theta
FLAG 112 1520 0
FLAG 720 1504 0
FLAG 848 1632 wedge_area
FLAG 1200 1568 outside_area
FLAG 1520 1728 bubble_area
FLAG 400 1776 0
FLAG 640 1728 0
FLAG 848 1776 0
FLAG 1200 1712 0
FLAG 1520 1872 0
FLAG 208 2096 0
FLAG 48 1696 V
FLAG 96 2144 ZET
FLAG 784 2144 SS
FLAG 96 2384 TS
FLAG 1232 2144 YS
FLAG 96 2288 0
FLAG 1232 2288 0
FLAG 784 2288 0
FLAG 96 2528 0
FLAG 96 2720 0
FLAG 672 2688 0
FLAG 96 2576 T
FLAG 672 2560 B
FLAG 592 352 Active1
FLAG 592 304 Active2
FLAG 416 416 0
FLAG 336 464 0
FLAG 336 192 0
FLAG -80 640 0
FLAG -80 496 orient
FLAG -624 1584 VBubble1
FLAG -528 1840 VBubble2
FLAG -528 1984 0
FLAG -624 1728 0
FLAG 112 2800 qr
FLAG 768 2784 qe
FLAG 784 2048 0
FLAG 784 1904 S1
FLAG 112 3024 DYC
FLAG 112 2944 0
FLAG 768 2928 0
FLAG 112 3168 0
FLAG 112 3360 0
FLAG 112 3216 delpb
FLAG 784 3360 0
FLAG 1232 3296 0
FLAG 784 3216 pda
FLAG 1232 3152 pdi
FLAG 1120 832 RCMIN1
FLAG 1296 832 RCMIN2
FLAG 1120 976 0
FLAG 1296 976 0
FLAG 112 3584 0
FLAG 720 3584 0
FLAG 1200 3600 0
FLAG 1616 3584 0
FLAG 2176 3568 0
FLAG 2560 3504 0
FLAG 112 3440 RC1D
FLAG 720 3440 RC2D
FLAG 1200 3456 RC1
FLAG 1616 3440 RC2
FLAG 2176 3424 D1
FLAG 2560 3360 D2
FLAG 1888 432 0
FLAG 1888 288 probe
FLAG 2272 336 0
FLAG 2272 192 probe2
FLAG 1616 -16 pout1
FLAG 1616 -208 pout2
FLAG 1392 144 0
FLAG 208 -240 0
FLAG 208 -384 Ramp
FLAG 1072 -240 PBubble2
FLAG 1072 96 PBubble1
SYMBOL voltage 64 0 R0
SYMATTR InstName V1
SYMATTR Value {P0}
SYMBOL ind 144 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 187 VBottom 2
SYMATTR InstName Lsupply
SYMATTR Value {2*LGTHS/(H0*AREAS)/CS*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 320 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -40 103 VBottom 2
SYMATTR InstName Rsupply
SYMATTR Value R=1/(CS**2)*absq2(i(Lsupply))
SYMBOL voltage 848 368 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1000 .004 1.5e-3 1.5e-3 1)
SYMATTR InstName V2
SYMBOL ind 864 336 R180
WINDOW 0 36 80 Left 2
WINDOW 3 -462 -6 Left 2
SYMATTR InstName Lc1
SYMATTR Value flux={2*LGTHC/(H0*AREAC)*redim_dQdt}/v(D1)*x
SYMATTR SpiceLine Rser=0
SYMBOL ind 832 -480 R0
WINDOW 3 -322 97 Left 2
SYMATTR InstName Lc2
SYMATTR Value flux={2*LGTHC/(H0*AREAC)*redim_dQdt}/v(D2)*x
SYMATTR SpiceLine Rser=0
SYMBOL res 864 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rcontrol1
SYMATTR Value R=v(RC1)*absq2(i(Lc1))
SYMBOL res 832 -368 R0
SYMATTR InstName Rcontrol2
SYMATTR Value R=v(RC2)*absq2(i(Lc2))
SYMBOL ind 1840 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -48 93 VBottom 2
SYMATTR InstName Lo1
SYMATTR Value {2*LGTHR/(H0*AREAR)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL ind 1824 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -54 123 VBottom 2
SYMATTR InstName Lo2
SYMATTR Value {2*LGTHR/(H0*AREAR)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 1648 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 247 VBottom 2
SYMATTR InstName Ro2
SYMATTR Value R=1/(AREAR**2)*absq2(i(Lo2))
SYMBOL res 1648 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 257 VBottom 2
SYMATTR InstName Ro1
SYMATTR Value R=1/(AREAR**2)*absq2(i(Lo1))
SYMBOL ind 1216 224 R0
SYMATTR InstName Lv1
SYMATTR Value {2*LGTHV/(H0*AREAV)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL ind 1248 -368 R180
WINDOW 0 36 80 Left 2
WINDOW 3 -446 24 Left 2
SYMATTR InstName Lv2
SYMATTR Value {2*LGTHV/(H0*AREAV)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 1248 -240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 -211 17 Left 2
SYMATTR InstName Rv2
SYMATTR Value R=RVI*absq2(i(Lv2))
SYMBOL res 1216 112 R0
SYMATTR InstName Rv1
SYMATTR Value {R_blocked_vent}
SYMBOL bv 336 608 R0
SYMATTR InstName QS
SYMATTR Value V=i(Lsupply)/redim_Q
SYMBOL bv 672 608 R0
SYMATTR InstName QC1
SYMATTR Value V=0.197
SYMBOL bv 928 608 R0
SYMATTR InstName QC2
SYMATTR Value V=0.066
SYMBOL bv 1200 608 R0
SYMATTR InstName QV1
SYMATTR Value V=i(Rv1)/redim_Q
SYMBOL bv 1552 608 R0
SYMATTR InstName QV2
SYMATTR Value V=i(Rv2)/redim_Q
SYMBOL bv 1824 608 R0
SYMATTR InstName QO1
SYMATTR Value V=i(Ro1)/redim_Q
SYMBOL bv 2064 608 R0
SYMATTR InstName QO2
SYMATTR Value V=i(Ro2)/redim_Q
SYMBOL bv 544 848 R0
WINDOW 3 -22 161 Left 2
SYMATTR InstName D1_min
SYMATTR Value V=if(v(REC1)<2500, CDMAX, -(CDMAX-CDMIN)*v(REC1)/1e4+1.25*CDMAX-0.25*CDMIN)
SYMBOL bv 720 848 R0
WINDOW 3 -34 119 Left 2
SYMATTR InstName D2_min
SYMATTR Value V=if(v(REC2)<2500, CDMAX, -(CDMAX-CDMIN)*v(REC2)/1e4+1.25*CDMAX-0.25*CDMIN)
SYMBOL bv 128 848 R0
SYMATTR InstName REC1
SYMATTR Value V=abs(v(QC1)*RE)
SYMBOL bv 336 848 R0
WINDOW 3 -43 122 Left 2
SYMATTR InstName REC2
SYMATTR Value V=abs(v(QC2)*RE)
SYMBOL bv 128 1104 R0
WINDOW 3 17 140 Left 2
SYMATTR InstName FC1
SYMATTR Value V=(v(C1)/P0+2*(uramp(v(QC1))/BC)**2)*BC
SYMBOL bv 320 1104 R0
SYMATTR InstName FC2
SYMATTR Value V=(v(C2)/P0+2*(uramp(v(QC2))/BC)**2)*BC
SYMBOL bv 720 1088 R0
SYMATTR InstName FSY
SYMATTR Value V=v(Supply)/P0+2*v(QS)**2
SYMBOL bv 1328 -64 R0
WINDOW 3 -95 53 Left 2
SYMATTR InstName Bubble1
SYMATTR Value V=v(Active1)*v(delpb)
SYMBOL bv 848 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName pc1
SYMATTR Value V=v(Active1)*v(delpb)/2
SYMBOL bv 848 -208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName pc2
SYMATTR Value V=v(Active2)*v(delpb)/2
SYMBOL bv 1328 -96 R180
WINDOW 0 24 96 Left 2
WINDOW 3 -145 60 Left 2
SYMATTR InstName Bubble2
SYMATTR Value V=v(Active2)*v(delpb)
SYMBOL bv 816 -80 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName psy
SYMATTR Value V=v(delpb)*1/4
SYMBOL bv 1136 1088 R0
SYMATTR InstName BETA
SYMATTR Value V=0.016
SYMBOL bv 112 1392 R0
SYMATTR InstName length_past
SYMATTR Value V=uramp(v(R)-v(R)*cos(v(BETA)-ALPH)-A2)
SYMBOL bv 720 1376 R0
SYMATTR InstName area_past
SYMATTR Value V=v(R)**2*acos((v(R)-v(length_past))/v(R))-(v(R)-v(length_past))*sqrt(2*v(R)*v(length_past)-v(length_past)**2)
SYMBOL bv 48 1712 R0
SYMATTR InstName V
SYMATTR Value V=13.9
SYMATTR SpiceLine delay=0.00001
SYMBOL bv 400 1648 R0
SYMATTR InstName wedge_length
SYMATTR Value V=A2/cos(v(BETA)+ALPH)
SYMBOL bv 640 1600 R0
WINDOW 0 22 16 Left 2
SYMATTR InstName theta
SYMATTR Value V=acos(cos(v(BETA)+ALPH)-A2/v(r))
SYMBOL bv 848 1648 R0
SYMATTR InstName wedge_area
SYMATTR Value V=0.5*sin(v(BETA))*(D+0.5)*v(wedge_length)
SYMBOL bv 1200 1584 R0
SYMATTR InstName outside_area
SYMATTR Value V=0.5*(v(R)-v(wedge_length))*v(R)*sin(ALPH+v(BETA)+v(theta))
SYMBOL bv 1520 1744 R0
SYMATTR InstName bubble_area
SYMATTR Value V=0.5*v(R)**2*(ALPH+v(BETA)+v(theta))+v(wedge_area)-v(outside_area)-v(area_past)
SYMBOL res 48 1968 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL bi 208 2064 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -574 -11 Left 2
SYMATTR InstName B3
SYMATTR Value I=v(R)+if(v(R) >= 0, v(bubble_area)-v(V), v(R)+6)
SYMBOL bv 96 2400 R0
SYMATTR InstName TS
SYMATTR Value V=if(v(ZET) > pi/2 - v(theta) - ALPH, tanh(v(YS)*SIGMA/(v(SS)+SIGMA/3)), 1)
SYMBOL bv 96 2160 R0
SYMATTR InstName ZET
SYMATTR Value V=atan(v(R)*cos(v(BETA))/(SPL-v(R)*sin(v(BETA))))
SYMBOL bv 784 2160 R0
SYMATTR InstName SS
SYMATTR Value V=v(R)*(v(BETA)-v(ZET)+pi/2)
SYMBOL bv 1232 2160 R0
SYMATTR InstName YS
SYMATTR Value V=sqrt((v(R)*cos(v(BETA)))**2+(SPL-v(R)*sin(v(BETA)))**2)-v(R)
SYMBOL bv 96 2592 R0
SYMATTR InstName T
SYMATTR Value V=2*cos((2*pi-acos(-v(B)/2))/3)
SYMBOL bv 672 2576 R0
SYMATTR InstName B
SYMATTR Value V=1.5*(-v(TS)+(v(TS)**3/3)+2/3+(2/3+v(TS)-(v(TS)**3/3))*cos(v(THETA)))
SYMBOL Digital\\srflop 464 256 R0
SYMATTR InstName State
SYMBOL bv 336 320 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName To2
SYMATTR Value V=if(2*v(R)*sin(v(BETA)) >= SPL, v(Active1), 0)
SYMBOL bv 336 336 R0
WINDOW 3 -591 19 Left 2
SYMATTR InstName To1
SYMATTR Value V=if(2*v(R)*sin(v(BETA)) >= SPL, v(Active2), 0)
SYMBOL bv -80 512 R0
SYMATTR InstName orient
SYMATTR Value V=v(Active1)-v(Active2)
SYMBOL bv -624 1600 R0
SYMATTR InstName VBubble1
SYMATTR Value V=sdt(-i(Bubble1)/redim_Q, v(Active2))
SYMBOL bv -528 1856 R0
SYMATTR InstName VBubble2
SYMATTR Value V=sdt(-i(Bubble2)/redim_Q, v(Active1))
SYMBOL bv 112 2816 R0
SYMATTR InstName qr
SYMATTR Value V=0.5*i(Lsupply)*sqrt(A1*v(S1)+1)*(1-v(T))*v(Ramp)
SYMBOL bv 768 2800 R0
SYMATTR InstName qe
SYMATTR Value V=0.5*i(Lsupply)*(sqrt(A1*v(S1)+1)-1)*v(Ramp)
SYMBOL bv 784 1920 R0
SYMATTR InstName S1
SYMATTR Value V=v(R)*(ALPH+v(BETA)+v(theta))
SYMBOL bv 112 3040 R0
SYMATTR InstName DYC
SYMATTR Value V=-v(R)*cos(v(BETA))+sqrt((cos(v(BETA))*v(R))**2-BC*BC+2*BC*v(R)*sin(v(BETA)))
SYMBOL bv 112 3232 R0
SYMATTR InstName delpb
SYMATTR Value V=2*redim_Q2*i(LSupply)**2/(v(R)+1e-5)*v(Ramp)**3
SYMBOL bi 992 -192 R0
WINDOW 3 134 78 Left 2
SYMATTR InstName QR2
SYMATTR Value I=v(Active2)*v(qe)
SYMBOL bi 1152 -32 R0
WINDOW 3 -98 54 Left 2
SYMATTR InstName QE1
SYMATTR Value I=v(Active1)*v(qe)
SYMBOL bi 1152 -112 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName QE2
SYMATTR Value I=v(Active2)*v(qr)
SYMBOL bi 992 48 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -123 110 Left 2
SYMATTR InstName QR1
SYMATTR Value I=v(Active1)*v(qr)
SYMBOL bv 784 3232 R0
SYMATTR InstName pda
SYMATTR Value V=redim_Q2*0.75*i(Rsupply)**2*(v(TS)+v(T)-(v(TS)**3+v(T)**3)/3)/AREAR*v(Ramp)
SYMBOL bv 1232 3168 R0
SYMATTR InstName pdi
SYMATTR Value V=redim_Q2*0.75*i(Rsupply)**2*(2/3-v(TS)+v(TS)**3/3)/AREAR*v(Ramp)
SYMBOL bv 1584 -176 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName PD2
SYMATTR Value V=v(pdi)
SYMBOL bv 1584 16 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName PD1
SYMATTR Value V=v(pda)
SYMBOL bv 1120 848 R0
WINDOW 3 -308 82 Left 2
SYMATTR InstName RCMIN1
SYMATTR Value V=1/(BC**2*v(D1_min)**2)
SYMBOL bv 1296 848 R0
WINDOW 3 60 63 Left 2
SYMATTR InstName RCMIN2
SYMATTR Value V=1/(BC**2*v(D2_min)**2)
SYMBOL bv 112 3456 R0
SYMATTR InstName RC1D
SYMATTR Value V=1/((KC+v(orient)*v(DYC))**2)
SYMBOL bv 720 3456 R0
SYMATTR InstName RC2D
SYMATTR Value V=1/((KC-v(orient)*v(DYC)**2))
SYMBOL bv 1200 3472 R0
SYMATTR InstName RC1
SYMATTR Value V=max(min(v(RC1D), RCMAX), v(RCMIN1))
SYMBOL bv 1616 3456 R0
SYMATTR InstName RC2
SYMATTR Value V=max(min(v(RC2D), RCMAX), v(RCMIN2))
SYMBOL bv 2176 3440 R0
SYMATTR InstName D1
SYMATTR Value V=if(v(RC1)==v(RC1D), 1, v(D1_min))
SYMBOL bv 2560 3376 R0
SYMATTR InstName D2
SYMATTR Value V=if(v(RC2)==v(RC2D), 1, v(D2_min))
SYMBOL bv 1888 304 R0
SYMATTR InstName B1
SYMATTR Value V=sqrt(P0*CS**2/redim_Q2)
SYMBOL bv 2272 208 R0
SYMATTR InstName B2
SYMATTR Value V=redim_Q2*redim_Q
SYMBOL cap 1376 32 R0
WINDOW 3 43 94 Left 2
SYMATTR InstName Cap
SYMATTR Value {sin(ALPH)*(LGTHS*B0)**2/100}
SYMBOL voltage 208 -368 R0
SYMATTR InstName Ramp
SYMATTR Value 1
TEXT -1336 -496 Left 2 !.param rho=1.2059 sigma=10 nu=1.4864e-5
TEXT -1328 80 Left 2 !.op
TEXT -1336 -448 Left 2 !.param D=0.905 B0=2.1e-3 BC=1 ALPH=.20944 XV1=8.640 LGTHC=10 AREAC=2 LGTHS=15 AREAS=3 LGTHV=10 AREAV=1.95 SPL=10 LGTHR=27.75 P0=10000 CS=0.85
TEXT -1336 -392 Left 2 !.param H0=3*B0
TEXT -1336 -96 Left 2 !.param Qref=B0*sqrt(2*P0/rho) RE=Qref/nu
TEXT -1336 -64 Left 2 !.param redim_dQdt=B0/(H0*Qref**2) redim_Q2=rho/(2*H0**2*B0**2)
TEXT -1328 -144 Left 2 !.param A1=3/sigma A2=(D+0.5)*cos(ALPH) A3=(D+0.5)*sin(ALPH) A4=(D+0.5)*tan(ALPH) AREAR=A2+SPL*sin(ALPH)
TEXT -1344 -344 Left 2 !.param CDMAX=0.9 CDMIN=0.6
TEXT -1336 -16 Left 2 !.param redim_Q=H0*Qref
TEXT -1328 16 Left 2 !.param KC=D+BC*tan(ALPH) RCMAX=1/(0.1414*BC)**2
TEXT -1336 56 Left 2 !.param RVI=1/AREAV**2
TEXT -1336 -312 Left 2 !.param R_blocked_vent=redim_Q*redim_Q2*1e6
TEXT -1336 136 Left 2 !.func absq2(q) {redim_Q2*max(abs(q), redim_Q*0.0001)}
TEXT -1328 184 Left 2 !.option noopiter
