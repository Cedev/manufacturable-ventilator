Version 4
SHEET 1 3040 4580
WIRE 848 -544 848 -560
WIRE 848 -464 848 -544
WIRE 1232 -464 1232 -544
WIRE 848 -352 848 -384
WIRE 1232 -336 1232 -384
WIRE 848 -208 848 -272
WIRE 848 -208 816 -208
WIRE 864 -208 848 -208
WIRE 992 -208 944 -208
WIRE 1072 -208 1072 -240
WIRE 1072 -208 992 -208
WIRE 1152 -208 1072 -208
WIRE 1232 -208 1232 -256
WIRE 1232 -208 1152 -208
WIRE 1328 -208 1232 -208
WIRE 992 -192 992 -208
WIRE 1152 -192 1152 -208
WIRE 1328 -192 1328 -208
WIRE 1616 -176 1616 -208
WIRE 1616 -176 1568 -176
WIRE 1664 -176 1616 -176
WIRE 1840 -176 1744 -176
WIRE 2032 -176 1920 -176
WIRE 2032 -112 2032 -176
WIRE 160 -80 64 -80
WIRE 336 -80 240 -80
WIRE 528 -80 416 -80
WIRE 720 -80 528 -80
WIRE 992 -80 992 -112
WIRE 992 -80 800 -80
WIRE 1152 -80 1152 -112
WIRE 1152 -80 992 -80
WIRE 1328 -80 1328 -112
WIRE 1328 -80 1152 -80
WIRE 1392 -80 1488 -176
WIRE 1392 -80 1328 -80
WIRE 1472 -80 1392 -80
WIRE 2032 -80 2032 -112
WIRE 1328 -48 1328 -80
WIRE 992 -32 992 -80
WIRE 1152 -32 1152 -80
WIRE 64 16 64 -80
WIRE 1488 16 1392 -80
WIRE 1616 16 1616 -16
WIRE 1616 16 1568 16
WIRE 1664 16 1616 16
WIRE 1856 16 1744 16
WIRE 2032 16 1936 16
WIRE 1392 32 1392 -80
WIRE 848 64 816 64
WIRE 864 64 848 64
WIRE 992 64 992 48
WIRE 992 64 944 64
WIRE 1072 64 992 64
WIRE 1152 64 1152 48
WIRE 1152 64 1072 64
WIRE 1232 64 1152 64
WIRE 1328 64 1328 32
WIRE 1328 64 1232 64
WIRE 1072 96 1072 64
WIRE 2032 112 2032 16
WIRE 848 128 848 64
WIRE 1232 128 1232 64
WIRE 2032 128 2032 112
WIRE 1392 144 1392 96
WIRE 64 176 64 96
WIRE 848 240 848 208
WIRE 1232 240 1232 208
WIRE 1232 320 1232 304
WIRE 848 384 848 320
WIRE 1232 384 1232 320
WIRE 848 400 848 384
WIRE 848 480 848 464
WIRE 848 480 768 480
WIRE 880 480 848 480
WIRE -1776 608 -1776 576
WIRE -1776 720 -1776 688
WIRE 880 736 880 688
WIRE 80 752 80 720
WIRE 1280 800 1280 768
WIRE 960 816 880 816
WIRE 1152 816 1152 800
WIRE 1152 816 1056 816
WIRE 1232 816 1152 816
WIRE 80 864 80 832
WIRE 960 864 880 864
WIRE 1152 864 1072 864
WIRE 1232 864 1152 864
WIRE 1152 880 1152 864
WIRE 960 928 960 896
WIRE 1280 928 1280 880
WIRE 880 976 880 944
WIRE 80 1120 80 1088
WIRE 416 1120 416 1088
WIRE 672 1120 672 1088
WIRE 944 1120 944 1088
WIRE 1296 1120 1296 1088
WIRE 1568 1120 1568 1088
WIRE 1808 1120 1808 1088
WIRE 416 1200 416 1184
WIRE 416 1200 80 1200
WIRE 672 1200 416 1200
WIRE 944 1200 672 1200
WIRE 1296 1200 944 1200
WIRE 1568 1200 1296 1200
WIRE 1808 1200 1568 1200
WIRE 1936 1200 1808 1200
WIRE 80 1232 80 1200
WIRE 272 1408 272 1376
WIRE 848 1408 848 1376
WIRE 1264 1408 1264 1376
WIRE 48 1440 48 1408
WIRE 272 1520 272 1488
WIRE 848 1536 848 1488
WIRE 1264 1536 1264 1488
WIRE 48 1552 48 1520
WIRE 1488 1696 1424 1696
WIRE 1648 1696 1488 1696
WIRE 1424 1776 1424 1760
WIRE 1648 1776 1424 1776
WIRE 496 1808 448 1808
WIRE 864 1808 864 1792
WIRE 864 1808 624 1808
WIRE 864 1824 864 1808
WIRE 496 1840 192 1840
WIRE 496 1872 368 1872
WIRE 736 1872 688 1872
WIRE 752 1904 704 1904
WIRE 752 1936 704 1936
WIRE 864 1936 864 1904
WIRE 192 1952 192 1920
WIRE 752 1952 752 1936
WIRE 768 1952 752 1952
WIRE 368 1984 368 1952
WIRE 560 1984 560 1936
WIRE 96 2208 96 2176
WIRE 96 2320 96 2288
WIRE 96 2512 96 2480
WIRE 784 2512 784 2480
WIRE 1232 2512 1232 2480
WIRE 96 2624 96 2592
WIRE 784 2624 784 2592
WIRE 1232 2624 1232 2592
WIRE 96 2752 96 2720
WIRE 96 2864 96 2832
WIRE 672 2928 672 2896
WIRE 96 2944 96 2912
WIRE 672 3024 672 3008
WIRE 96 3056 96 3024
WIRE 96 3200 96 3168
WIRE 1216 3200 1216 3168
WIRE 96 3312 96 3280
WIRE 1216 3312 1216 3280
WIRE 96 3488 96 3456
WIRE 848 3504 848 3472
WIRE 96 3600 96 3568
WIRE 848 3616 848 3584
WIRE 96 3840 96 3808
WIRE 304 3840 304 3808
WIRE 512 3840 512 3808
WIRE 688 3840 688 3808
WIRE 1088 3840 1088 3808
WIRE 1264 3840 1264 3808
WIRE 304 3920 96 3920
WIRE 512 3920 304 3920
WIRE 688 3920 512 3920
WIRE 96 3952 96 3920
WIRE 1088 3952 1088 3920
WIRE 1264 3952 1264 3920
WIRE 96 4128 96 4096
WIRE 96 4240 96 4208
WIRE 2544 4352 2544 4320
WIRE 2160 4416 2160 4384
WIRE 96 4432 96 4400
WIRE 704 4432 704 4400
WIRE 1600 4432 1600 4400
WIRE 1184 4448 1184 4416
WIRE 2544 4464 2544 4432
WIRE 2160 4528 2160 4496
WIRE 96 4544 96 4512
WIRE 704 4544 704 4512
WIRE 1600 4544 1600 4512
WIRE 1184 4560 1184 4528
FLAG 64 176 0
FLAG 880 480 0
FLAG 528 -80 Supply
FLAG 1472 -80 PB2
FLAG 1232 384 0
FLAG 1232 -544 0
FLAG 2032 -112 0
FLAG 2032 112 0
FLAG 848 -544 0
FLAG 80 1232 0
FLAG 80 1088 QS
FLAG 944 1088 QV1
FLAG 416 1088 QC1
FLAG 672 1088 QC2
FLAG 1568 1088 QO1
FLAG 1296 1088 QV2
FLAG 1808 1088 QO2
FLAG 96 3808 REC1
FLAG 304 3808 REC2
FLAG 512 3808 D1_min
FLAG 688 3808 D2_min
FLAG 96 3952 0
FLAG 816 64 C1
FLAG 816 -208 C2
FLAG 48 1408 FC1
FLAG 272 1376 FC2
FLAG 848 1376 FSY
FLAG 48 1552 0
FLAG 272 1520 0
FLAG 848 1536 0
FLAG 1264 1376 BETA
FLAG 1264 1536 0
FLAG 560 1984 R
FLAG 864 1936 0
FLAG 96 2480 ZET
FLAG 784 2480 SS
FLAG 96 2720 TS
FLAG 1232 2480 YS
FLAG 96 2624 0
FLAG 1232 2624 0
FLAG 784 2624 0
FLAG 96 2864 0
FLAG 96 3056 0
FLAG 672 3024 0
FLAG 96 2912 T
FLAG 672 2896 B
FLAG 1152 880 Active1
FLAG 1152 800 Active2
FLAG 960 928 0
FLAG 880 976 0
FLAG 880 688 0
FLAG 96 3456 qr
FLAG 848 3472 qe
FLAG 96 4096 DYC
FLAG 96 3600 0
FLAG 848 3616 0
FLAG 96 4240 0
FLAG 96 2320 0
FLAG 96 2176 delpb
FLAG 96 3312 0
FLAG 1216 3312 0
FLAG 96 3168 pda
FLAG 1216 3168 pdi
FLAG 1088 3808 RCMIN1
FLAG 1264 3808 RCMIN2
FLAG 1088 3952 0
FLAG 1264 3952 0
FLAG 96 4544 0
FLAG 704 4544 0
FLAG 1184 4560 0
FLAG 1600 4544 0
FLAG 2160 4528 0
FLAG 2544 4464 0
FLAG 96 4400 RC1D
FLAG 704 4400 RC2D
FLAG 1184 4416 RC1
FLAG 1600 4400 RC2
FLAG 2160 4384 D1
FLAG 2544 4320 D2
FLAG 1616 -16 pout1
FLAG 1616 -208 pout2
FLAG 1392 144 0
FLAG -1776 720 0
FLAG -1776 576 Ramp
FLAG 1072 -240 PBubble2
FLAG 1072 96 PBubble1
FLAG 80 864 0
FLAG 80 720 LSP
FLAG 736 1872 S1
FLAG 752 1904 THETA
FLAG 864 1792 V
FLAG 368 1984 0
FLAG 192 1952 0
FLAG 448 1808 BETA
FLAG 1424 1776 0
FLAG 1488 1696 VBubble1Cap
FLAG 768 1952 X
FLAG 1280 768 orient
FLAG 1280 928 0
SYMBOL voltage 64 0 R0
SYMATTR InstName V1
SYMATTR Value {P0}
SYMBOL ind 144 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 187 VBottom 2
SYMATTR InstName Lsupply
SYMATTR Value {2*LGTHS/(H0*AREAS)/CS*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 320 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -40 103 VBottom 2
SYMATTR InstName Rsupply
SYMATTR Value R=1/(CS**2)*absq2(i(Lsupply))
SYMBOL voltage 848 368 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 2000 .004 1.5e-3 1.5e-3 1)
SYMATTR InstName V2
SYMBOL ind 864 336 R180
WINDOW 0 36 80 Left 2
WINDOW 3 -462 -6 Left 2
SYMATTR InstName Lc1
SYMATTR Value flux={2*LGTHC/(H0*AREAC)*redim_dQdt}/v(D1)*x
SYMATTR SpiceLine Rser=0
SYMBOL ind 832 -480 R0
WINDOW 3 -322 97 Left 2
SYMATTR InstName Lc2
SYMATTR Value flux={2*LGTHC/(H0*AREAC)*redim_dQdt}/v(D2)*x
SYMATTR SpiceLine Rser=0
SYMBOL res 864 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rcontrol1
SYMATTR Value R=v(RC1)*absq2(i(Lc1))
SYMBOL res 832 -368 R0
SYMATTR InstName Rcontrol2
SYMATTR Value R=v(RC2)*absq2(i(Lc2))
SYMBOL ind 1840 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -48 93 VBottom 2
SYMATTR InstName Lo1
SYMATTR Value {2*LGTHR/(H0*AREAR)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL ind 1824 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -54 123 VBottom 2
SYMATTR InstName Lo2
SYMATTR Value {2*LGTHR/(H0*AREAR)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 1648 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 247 VBottom 2
SYMATTR InstName Ro2
SYMATTR Value R=1/(AREAR**2)*absq2(i(Lo2))
SYMBOL res 1648 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -4 257 VBottom 2
SYMATTR InstName Ro1
SYMATTR Value R=1/(AREAR**2)*absq2(i(Lo1))
SYMBOL ind 1216 224 R0
SYMATTR InstName Lv1
SYMATTR Value {2*LGTHV/(H0*AREAV)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL ind 1248 -368 R180
WINDOW 0 36 80 Left 2
WINDOW 3 -446 24 Left 2
SYMATTR InstName Lv2
SYMATTR Value {2*LGTHV/(H0*AREAV)*redim_dQdt}
SYMATTR SpiceLine Rser=0
SYMBOL res 1248 -240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 -211 17 Left 2
SYMATTR InstName Rv2
SYMATTR Value R=RVI*absq2(i(Lv2))
SYMBOL res 1216 112 R0
SYMATTR InstName Rv1
SYMATTR Value {R_blocked_vent}
SYMBOL bv 80 1104 R0
SYMATTR InstName QS
SYMATTR Value V=i(Lsupply)/redim_Q
SYMBOL bv 416 1104 R0
SYMATTR InstName QC1
SYMATTR Value V=i(Lc1)/redim_Q
SYMBOL bv 672 1104 R0
SYMATTR InstName QC2
SYMATTR Value V=i(Lc2)/redim_Q
SYMBOL bv 944 1104 R0
SYMATTR InstName QV1
SYMATTR Value V=i(Rv1)/redim_Q
SYMBOL bv 1296 1104 R0
SYMATTR InstName QV2
SYMATTR Value V=i(Rv2)/redim_Q
SYMBOL bv 1568 1104 R0
SYMATTR InstName QO1
SYMATTR Value V=i(Ro1)/redim_Q
SYMBOL bv 1808 1104 R0
SYMATTR InstName QO2
SYMATTR Value V=i(Ro2)/redim_Q
SYMBOL bv 512 3824 R0
WINDOW 3 -22 161 Left 2
SYMATTR InstName D1_min
SYMATTR Value V=if(v(REC1)<2500, CDMAX, -(CDMAX-CDMIN)*v(REC1)/1e4+1.25*CDMAX-0.25*CDMIN)
SYMBOL bv 688 3824 R0
WINDOW 3 -34 119 Left 2
SYMATTR InstName D2_min
SYMATTR Value V=if(v(REC2)<2500, CDMAX, -(CDMAX-CDMIN)*v(REC2)/1e4+1.25*CDMAX-0.25*CDMIN)
SYMBOL bv 96 3824 R0
SYMATTR InstName REC1
SYMATTR Value V=abs(v(QC1)*RE)
SYMBOL bv 304 3824 R0
WINDOW 3 -43 122 Left 2
SYMATTR InstName REC2
SYMATTR Value V=abs(v(QC2)*RE)
SYMBOL bv 48 1424 R0
WINDOW 3 17 140 Left 2
SYMATTR InstName FC1
SYMATTR Value V=(v(C1)/P0+2*(uramp(v(QC1))/BC)**2)*BC
SYMBOL bv 272 1392 R0
SYMATTR InstName FC2
SYMATTR Value V=(v(C2)/P0+2*(uramp(v(QC2))/BC)**2)*BC
SYMBOL bv 848 1392 R0
SYMATTR InstName FSY
SYMATTR Value V=v(Supply)/P0+2*v(QS)**2
SYMBOL bv 1328 -64 R0
WINDOW 3 -95 53 Left 2
SYMATTR InstName Bubble1
SYMATTR Value V=v(Active1)*v(delpb)
SYMBOL bv 848 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName pc1
SYMATTR Value V=v(Active1)*v(delpb)/2
SYMBOL bv 848 -208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName pc2
SYMATTR Value V=v(Active2)*v(delpb)/2
SYMBOL bv 1328 -96 R180
WINDOW 0 24 96 Left 2
WINDOW 3 -145 60 Left 2
SYMATTR InstName Bubble2
SYMATTR Value V=v(Active2)*v(delpb)
SYMBOL bv 816 -80 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName psy
SYMATTR Value V=v(delpb)*1/4
SYMBOL bv 1264 1392 R0
SYMATTR InstName BETA
SYMATTR Value V=atan(v(orient)*(v(FC1)-v(FC2))/eps(v(FSY)))
SYMBOL bv 864 1808 R0
SYMATTR InstName V
SYMATTR Value V=v(VBubble1Cap)
SYMBOL bv 96 2736 R0
SYMATTR InstName TS
SYMATTR Value V=if(v(ZET) > pi/2 - v(theta) - ALPH, tanh(v(YS)*SIGMA/(v(SS)+SIGMA/3)), 1)
SYMBOL bv 96 2496 R0
SYMATTR InstName ZET
SYMATTR Value V=atan(v(R)*cos(v(BETA))/(SPL-v(R)*sin(v(BETA))))
SYMBOL bv 784 2496 R0
SYMATTR InstName SS
SYMATTR Value V=v(R)*(v(BETA)-v(ZET)+pi/2)
SYMBOL bv 1232 2496 R0
SYMATTR InstName YS
SYMATTR Value V=sqrt((v(R)*cos(v(BETA)))**2+(SPL-v(R)*sin(v(BETA)))**2)-v(R)
SYMBOL bv 96 2928 R0
SYMATTR InstName T
SYMATTR Value V=2*cos((2*pi-acos(-v(B)/2))/3)
SYMBOL bv 672 2912 R0
SYMATTR InstName B
SYMATTR Value V=1.5*(-v(TS)+(v(TS)**3/3)+2/3+(2/3+v(TS)-(v(TS)**3/3))*cos(v(THETA)))
SYMBOL Digital\\srflop 1008 768 R0
SYMATTR InstName State
SYMBOL bv 880 832 R180
WINDOW 0 24 96 Left 2
WINDOW 3 9 20 Left 2
SYMATTR InstName To2
SYMATTR Value V=if(v(LSP) >= SPL, v(Active1), 0)
SYMBOL bv 880 848 R0
WINDOW 3 -405 19 Left 2
SYMATTR InstName To1
SYMATTR Value V=if(v(LSP) >= SPL, v(Active2), 0)
SYMBOL bv 96 3472 R0
SYMATTR InstName qr
SYMATTR Value V=0.5*i(Lsupply)*sqrt(A1*v(S1)+1)*(1-v(T))*v(Ramp)
SYMBOL bv 848 3488 R0
SYMATTR InstName qe
SYMATTR Value V=0.5*i(Lsupply)*(sqrt(A1*v(S1)+1)-1)*v(Ramp)
SYMBOL bv 96 4112 R0
SYMATTR InstName DYC
SYMATTR Value V=-v(R)*cos(v(BETA))+sqrt((cos(v(BETA))*v(R))**2-BC*BC+2*BC*v(R)*sin(v(BETA)))
SYMBOL bv 96 2192 R0
SYMATTR InstName delpb
SYMATTR Value V=2*redim_Q2*i(LSupply)**2/eps(v(R))*v(Ramp)**3
SYMBOL bi 992 -192 R0
WINDOW 3 134 78 Left 2
SYMATTR InstName QE2
SYMATTR Value I=v(Active2)*v(qr)
SYMBOL bi 1152 -32 R0
WINDOW 3 -98 54 Left 2
SYMATTR InstName QR1
SYMATTR Value I=v(Active1)*v(qr)
SYMBOL bi 1152 -112 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName QR2
SYMATTR Value I=v(Active2)*v(qe)
SYMBOL bi 992 48 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -123 110 Left 2
SYMATTR InstName QE1
SYMATTR Value I=v(Active1)*v(qe)
SYMBOL bv 96 3184 R0
SYMATTR InstName pda
SYMATTR Value V=redim_Q2*0.75*i(Rsupply)**2*(v(TS)+v(T)-(v(TS)**3+v(T)**3)/3)/AREAR*v(Ramp)
SYMBOL bv 1216 3184 R0
SYMATTR InstName pdi
SYMATTR Value V=redim_Q2*0.75*i(Rsupply)**2*(2/3-v(TS)+v(TS)**3/3)/AREAR*v(Ramp)
SYMBOL bv 1584 -176 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName PD2
SYMATTR Value V=v(pdi)
SYMBOL bv 1584 16 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName PD1
SYMATTR Value V=v(pda)
SYMBOL bv 1088 3824 R0
WINDOW 3 -308 82 Left 2
SYMATTR InstName RCMIN1
SYMATTR Value V=1/(BC**2*v(D1_min)**2)
SYMBOL bv 1264 3824 R0
WINDOW 3 60 63 Left 2
SYMATTR InstName RCMIN2
SYMATTR Value V=1/(BC**2*v(D2_min)**2)
SYMBOL bv 96 4416 R0
SYMATTR InstName RC1D
SYMATTR Value V=1/(eps(KC+v(orient)*v(DYC))**2)
SYMBOL bv 704 4416 R0
SYMATTR InstName RC2D
SYMATTR Value V=1/(eps(KC-v(orient)*v(DYC)**2))
SYMBOL bv 1184 4432 R0
SYMATTR InstName RC1
SYMATTR Value V=max(min(v(RC1D), RCMAX), v(RCMIN1))
SYMBOL bv 1600 4416 R0
SYMATTR InstName RC2
SYMATTR Value V=max(min(v(RC2D), RCMAX), v(RCMIN2))
SYMBOL bv 2160 4400 R0
SYMATTR InstName D1
SYMATTR Value V=if(v(RC1)==v(RC1D), 1, v(D1_min))
SYMBOL bv 2544 4336 R0
SYMATTR InstName D2
SYMATTR Value V=if(v(RC2)==v(RC2D), 1, v(D2_min))
SYMBOL cap 1376 32 R0
WINDOW 3 43 94 Left 2
SYMATTR InstName Cap
SYMATTR Value {sin(ALPH)*(LGTHS*B0)**2/bulk_modulus}
SYMBOL voltage -1776 592 R0
SYMATTR InstName Ramp
SYMATTR Value 1
SYMBOL bv 80 736 R0
SYMATTR InstName LSP
SYMATTR Value V=2*v(R)*sin(v(BETA))
SYMBOL bubble_volume 592 1872 R0
SYMATTR InstName X1
SYMBOL bv 368 1856 R0
SYMATTR InstName B3
SYMATTR Value V={ALPH}
SYMBOL bv 192 1824 R0
SYMATTR InstName B4
SYMATTR Value V={D+0.5}
SYMBOL cap 1408 1696 R0
SYMATTR InstName C1
SYMATTR Value {redim_V}
SYMBOL f 1648 1776 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -104 2 Left 2
SYMATTR InstName F1
SYMATTR Value Bubble1
SYMATTR Value2 -1
SYMBOL e2 1280 784 R0
SYMATTR InstName Eorient
SYMATTR Value 1
TEXT -1880 -496 Left 2 !.param rho=1.2059 sigma=10 nu=1.4864e-5
TEXT -1872 456 Left 2 !.tran 0.04
TEXT -1880 -456 Left 2 !.param D=0.905 B0=2.1e-3 BC=1 ALPH=.20944 XV1=8.640 LGTHC=10 AREAC=2 LGTHS=15 AREAS=3 LGTHV=10 AREAV=1.95 SPL=10 LGTHR=27.75 P0=10000 CS=0.85
TEXT -1880 -416 Left 2 !.param H0=3*B0
TEXT -1872 -16 Left 2 !.param Qref=B0*sqrt(2*P0/rho) RE=Qref/nu
TEXT -1872 16 Left 2 !.param redim_dQdt=B0/(H0*Qref**2) redim_Q2=rho/(2*H0**2*B0**2)
TEXT -1872 -144 Left 2 !.param A1=3/sigma A2=(D+0.5)*cos(ALPH) A3=(D+0.5)*sin(ALPH) A4=(D+0.5)*tan(ALPH) AREAR=A2+SPL*sin(ALPH)
TEXT -1880 -376 Left 2 !.param CDMAX=0.9 CDMIN=0.6
TEXT -1872 56 Left 2 !.param redim_Q=H0*Qref redim_V=H0*B0**2
TEXT -1872 -112 Left 2 !.param KC=D+BC*tan(ALPH) RCMAX=1/(0.1414*BC)**2
TEXT -1872 -80 Left 2 !.param RVI=1/AREAV**2
TEXT -1880 -336 Left 2 !.param R_blocked_vent=redim_Q*redim_Q2*1e6
TEXT -1888 200 Left 2 !.func absq2(q) {redim_Q2*max(abs(q), redim_Q*0.0001)}
TEXT -1872 416 Left 2 !.option noopiter
TEXT -1880 288 Left 2 !.param epsilon=1e-5
TEXT -1872 336 Left 2 !.func eps(y) {y + if(y>=0, 1, -1)*epsilon/(1+exp(abs(y)/10))}
TEXT -1880 -296 Left 2 !.param bulk_modulus=101
TEXT -1936 -528 Left 2 ;Device parameters
TEXT -1936 -176 Left 2 ;Calculated constants
TEXT -1944 160 Left 2 ;Dimensioned quadratic flow resistance
TEXT -1944 248 Left 2 ;Numeric precision and division by 0
TEXT -1872 -48 Left 2 ;Conversion from dimensionless quantities
TEXT -1952 384 Left 2 ;Simulation
TEXT -1872 488 Left 2 ;Capture the voltage ramp up during initialization
TEXT 944 -640 Left 4 ;Amplifier
TEXT -56 1608 Left 2 ;Bubble volume and jet geometry
TEXT -56 1288 Left 2 ;Jet deflection
TEXT -40 1024 Left 2 ;Dimensionless flows
TEXT -40 640 Left 2 ;Attachment state
TEXT -40 2384 Left 2 ;Jet-splitter intersection
TEXT -24 3384 Left 2 ;Entrained and returned flows
TEXT -48 2080 Left 2 ;Pressure across jet
TEXT -24 3112 Left 2 ;Pressure recovery at splitter
TEXT -24 3656 Left 2 ;Control resistance and discharge coefficient
